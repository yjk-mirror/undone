[scene]
id          = "base::workplace_first_day"
pack        = "base"
description = "First day at the tech company. The lobby, the manager, the coworker who explains something you invented."

[intro]
prose = """
The subway runs on time, which is a good sign or a coincidence.

The financial district is twenty minutes from Clement by train, which you tested yesterday with the transit app and are now confirming with your actual body on an actual train. Business casual feels different than you remembered — the pants sit differently, the blouse has a collar that does something you're still calibrating.

{% if not w.alwaysFemale() %}
You had someone else dress you in your forties and this is the first time you've had to figure out what *professional* means from the other side.
{% endif %}

You arrive at the building at 8:47. The lobby is glass and steel and the security desk has two guards and a badge reader.

The guard looks at your ID. He looks at the badge reader. He looks at you.

"First day?" he says.

"Yes," you say. "Robin. Software engineering."

He types something. The system takes a moment. "Okay," he says. "Visitor badge until your card is issued. Someone will meet you."

You take the badge and find a seat in the lobby to wait. Around you, the morning rush moves through with the focus of people who know exactly where they're going and don't have time to notice anyone who doesn't.

At 9:02 your new manager comes through the turnstile looking for you.

{% if w.hasTrait("SHY") %}
You stand up too quickly and almost drop your bag.
{% else %}
You stand. He finds you by the process of elimination.
{% endif %}

His face does the thing you expected it to do.

You give him a professional smile and say your name before he can work out how to ask if you're the person he's looking for.
"""

[[intro_variants]]
condition = "!w.alwaysFemale() && w.getSkill('FEMININITY') < 15"
prose = """
The financial district. Twenty minutes. The transit app was right.

You get off the train and walk to the building and show your ID at the desk and wait for the manager. You've been at this company for approximately ninety minutes in total, counting the onboarding calls. You've read the architecture docs. You know the codebase language. You've prepared for everything except how you're going to be read.

The manager comes through the turnstile.

His face does the thing.

You say your name before he can figure out what to say. Professional. Clear. He extends his hand and you shake it.

*Okay*, you think. *We're doing this.*
"""

[[thoughts]]
condition = "!w.alwaysFemale()"
style     = "inner_voice"
prose = """
You have institutional knowledge. You know the vocabulary, the stack, the architecture patterns. You've been doing this for ten years.

Your manager has decided you might be an intern. You watched him make this decision in real time. You're going to spend today correcting it by means of doing the work.

This is, you think, exactly how you would have managed this as a senior engineer before. Work the problem. Let the results speak. You just didn't expect to have to start over.
"""

# ── Player Actions ────────────────────────────────────────────────────

[[actions]]
id    = "meet_the_team"
label = "Meet the team. Get oriented."
detail = "The standup is at ten. You know what standups are."
allow_npc_actions = true
prose = """
The open plan office has the organized chaos of a team that's grown faster than its process. You find your desk — a temporary one, pending a permanent assignment — and set up your laptop with the efficiency of someone who's done this in new codebases many times.

{% if w.hasTrait("AMBITIOUS") %}
You're in the codebase before 9:30. You've found three things you'd do differently and have said nothing about two of them.
{% elif w.hasTrait("DOWN_TO_EARTH") %}
You get the machine configured and then ask your neighbor who to talk to about a monitor. The neighbor is helpful. This is fine.
{% else %}
You get the machine configured and open the README. It's out of date. You take notes.
{% endif %}

At ten the team gathers for standup. Someone introduces you as "Robin from the Seattle office, she's transferring in." You shake hands with seven people and remember four of their names.

The day moves forward at the speed of days.
"""

  [[actions.effects]]
  type     = "advance_arc"
  arc      = "base::workplace_opening"
  to_state = "working"

  [[actions.effects]]
  type = "set_game_flag"
  flag = "STARTED_JOB"

  [[actions.effects]]
  type   = "skill_increase"
  skill  = "FEMININITY"
  amount = 3

  [[actions.next]]
  finish = true

[[actions]]
id    = "prove_it_now"
label = "Establish your position early"
detail = "The first day is the day it's easiest to set a baseline. Don't wait."
condition = "w.hasTrait('AMBITIOUS') || w.hasTrait('BITCHY')"
prose = """
The coworker — Dan, you've already forgotten his last name — starts explaining the authentication system to you at 11:15 like it's a concept you might not know.

You wait until he finishes the sentence.

{% if w.hasTrait("BITCHY") %}
"The spec for that," you say, "is in the repo. The one I wrote during the design phase. I can send you the link if you want a refresher." You say it without inflection. You're smiling. He stops.
{% else %}
"I know," you say, without edge. "I was in the design review. I wrote the original requirements doc — the one in the repo, not the deck." You say it matter-of-factly, like you're noting a fact. "But thank you."
{% endif %}

He processes this. Then he nods, slowly, and finds something else to do.

You turn back to your screen. This is established now. You don't have to do it again.
"""

  [[actions.effects]]
  type     = "advance_arc"
  arc      = "base::workplace_opening"
  to_state = "working"

  [[actions.effects]]
  type = "set_game_flag"
  flag = "STARTED_JOB"

  [[actions.effects]]
  type   = "skill_increase"
  skill  = "FEMININITY"
  amount = 3

  [[actions.next]]
  finish = true

# ── NPC Actions ────────────────────────────────────────────────────

[[npc_actions]]
id        = "dan_explains"
label     = "Coworker explains something she knows"
weight    = 10
condition = "!scene.hasFlag('dan_done')"
prose = """
The coworker — Dan, from the backend team — finds you at your temporary desk around eleven and starts explaining the authentication architecture with the helpful energy of someone orienting a new hire who might be lost.

You listen. He knows what he's talking about. He's just telling it to the wrong person.

{% if w.hasTrait("AMBITIOUS") %}
You wait until he reaches the end of his explanation and then say, "I actually designed the initial spec for this — I'm in the commit history if you want to check. But I appreciate the walkthrough." You say it without edge. He pauses, recalibrates, and moves on.
{% elif w.hasTrait("SHY") %}
You let him finish. "Got it, thanks," you say. You write it down, even though you already know it, because writing it down is what you do when you've decided not to correct someone. You spend the rest of the morning wondering if you made the right call.
{% else %}
You let him finish. "Thanks," you say, and turn back to your screen. You've had the codebase open. You've been in this specific module since 9:30.

The gap between what you know and what he thinks you know is going to close eventually. You can wait.
{% endif %}
"""

  [[npc_actions.effects]]
  type = "set_scene_flag"
  flag = "dan_done"

  [[npc_actions.effects]]
  type     = "advance_arc"
  arc      = "base::workplace_opening"
  to_state = "working"

  [[npc_actions.effects]]
  type = "set_game_flag"
  flag = "STARTED_JOB"

  [[npc_actions.effects]]
  type   = "skill_increase"
  skill  = "FEMININITY"
  amount = 3

  [[npc_actions.next]]
  finish = true
