# Base pack schedule
# Each [[slot]] defines a named timeslot available during the week.
# The scheduler evaluates conditions and does weighted random selection.

[[slot]]
name = "free_time"

  [[slot.events]]
  scene     = "base::rain_shelter"
  condition = "gd.week() > 0"
  weight    = 10

  [[slot.events]]
  scene     = "base::morning_routine"
  condition = "gd.week() >= 1"
  weight    = 15

  [[slot.events]]
  scene     = "base::coffee_shop"
  condition = "gd.week() >= 1"
  weight    = 10
  once_only = false

  [[slot.events]]
  scene     = "base::plan_your_day"
  weight    = 0
  trigger   = "gd.week() >= 2"
  once_only = true

# ── Robin opening arc ────────────────────────────────────────────────

[[slot]]
name = "robin_opening"

  [[slot.events]]
  scene     = "base::robin_arrival"
  condition = "gd.hasGameFlag('ROUTE_ROBIN')"
  weight    = 0
  trigger   = "gd.hasGameFlag('ROUTE_ROBIN')"
  once_only = true

  [[slot.events]]
  scene     = "base::robin_landlord"
  condition = "gd.hasGameFlag('ROUTE_ROBIN') && !gd.hasGameFlag('MET_LANDLORD')"
  weight    = 0
  trigger   = "gd.hasGameFlag('ROUTE_ROBIN') && !gd.hasGameFlag('MET_LANDLORD')"
  once_only = true

  [[slot.events]]
  scene     = "base::robin_first_night"
  condition = "gd.hasGameFlag('ROUTE_ROBIN') && gd.arcState('base::robin_opening') == 'arrived'"
  weight    = 0
  trigger   = "gd.hasGameFlag('ROUTE_ROBIN') && gd.arcState('base::robin_opening') == 'arrived'"
  once_only = true

  [[slot.events]]
  scene     = "base::robin_first_clothes"
  condition = "gd.hasGameFlag('ROUTE_ROBIN') && gd.arcState('base::robin_opening') == 'week_one'"
  weight    = 10
  once_only = true

  [[slot.events]]
  scene     = "base::robin_first_day"
  condition = "gd.hasGameFlag('ROUTE_ROBIN') && gd.arcState('base::robin_opening') == 'week_one'"
  weight    = 0
  trigger   = "gd.hasGameFlag('ROUTE_ROBIN') && gd.arcState('base::robin_opening') == 'week_one'"
  once_only = true

  [[slot.events]]
  scene     = "base::robin_work_meeting"
  condition = "gd.hasGameFlag('ROUTE_ROBIN') && gd.arcState('base::robin_opening') == 'working' && !gd.hasGameFlag('FIRST_MEETING_DONE')"
  weight    = 0
  trigger   = "gd.hasGameFlag('ROUTE_ROBIN') && gd.arcState('base::robin_opening') == 'working' && !gd.hasGameFlag('FIRST_MEETING_DONE')"
  once_only = true

  [[slot.events]]
  scene     = "base::robin_evening"
  condition = "gd.hasGameFlag('ROUTE_ROBIN') && gd.arcState('base::robin_opening') == 'working'"
  weight    = 0
  trigger   = "gd.hasGameFlag('ROUTE_ROBIN') && gd.arcState('base::robin_opening') == 'working' && gd.hasGameFlag('FIRST_MEETING_DONE')"
  once_only = true

# ── Camila opening arc ────────────────────────────────────────────────

[[slot]]
name = "camila_opening"

  [[slot.events]]
  scene     = "base::camila_arrival"
  condition = "gd.hasGameFlag('ROUTE_CAMILA')"
  weight    = 0
  trigger   = "gd.hasGameFlag('ROUTE_CAMILA')"
  once_only = true

  [[slot.events]]
  scene     = "base::camila_dorm"
  condition = "gd.hasGameFlag('ROUTE_CAMILA') && gd.arcState('base::camila_opening') == 'arrived'"
  weight    = 0
  trigger   = "gd.hasGameFlag('ROUTE_CAMILA') && gd.arcState('base::camila_opening') == 'arrived'"
  once_only = true

  [[slot.events]]
  scene     = "base::camila_orientation"
  condition = "gd.hasGameFlag('ROUTE_CAMILA') && gd.arcState('base::camila_opening') == 'orientation'"
  weight    = 0
  trigger   = "gd.hasGameFlag('ROUTE_CAMILA') && gd.arcState('base::camila_opening') == 'orientation'"
  once_only = true

  [[slot.events]]
  scene     = "base::camila_library"
  condition = "gd.hasGameFlag('ROUTE_CAMILA') && gd.arcState('base::camila_opening') == 'dorm_life'"
  weight    = 10
  once_only = true

  [[slot.events]]
  scene     = "base::camila_call_raul"
  condition = "gd.hasGameFlag('ROUTE_CAMILA') && gd.arcState('base::camila_opening') == 'dorm_life' && !gd.hasGameFlag('CALL_HOME_DONE')"
  weight    = 8
  once_only = true

  [[slot.events]]
  scene     = "base::camila_study_session"
  condition = "gd.hasGameFlag('ROUTE_CAMILA') && gd.arcState('base::camila_opening') == 'dorm_life' && !gd.hasGameFlag('STUDY_SESSION_DONE')"
  weight    = 10
  once_only = true

  [[slot.events]]
  scene     = "base::camila_dining_hall"
  condition = "gd.hasGameFlag('ROUTE_CAMILA') && gd.arcState('base::camila_opening') == 'dorm_life' && gd.hasGameFlag('STUDY_SESSION_DONE')"
  weight    = 0
  trigger   = "gd.hasGameFlag('ROUTE_CAMILA') && gd.arcState('base::camila_opening') == 'dorm_life' && gd.hasGameFlag('STUDY_SESSION_DONE')"
  once_only = true
